
//	-	-	-	-	-	-	-	-	-	-	-	-	-	-	-	-	-	-	-
//
//	Gerbil
//
//	Copyright (c) 2001, Bruce Moreland.  All rights reserved.
//
//	-	-	-	-	-	-	-	-	-	-	-	-	-	-	-	-	-	-	-
//
//	This file is part of the Gerbil chess program project.
//
//	Gerbil is free software; you can redistribute it and/or modify it under
//	the terms of the GNU General Public License as published by the Free
//	Software Foundation; either version 2 of the License, or (at your option)
//	any later version.
//
//	Gerbil is distributed in the hope that it will be useful, but WITHOUT ANY
//	WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS
//	FOR A PARTICULAR PURPOSE.  See the GNU General Public License for more
//	details.
//
//	You should have received a copy of the GNU General Public License along
//	with Gerbil; if not, write to the Free Software Foundation, Inc.,
//	59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
//
//	-	-	-	-	-	-	-	-	-	-	-	-	-	-	-	-	-	-	-

#include "engine.h"

#ifdef	DEBUG
static char const s_aszModule[] = __FILE__;
#endif


//	-	-	-	-	-	-	-	-	-	-	-	-	-	-	-	-	-	-	-

int	const c_argvalPos[pcMAX][coMAX][csqMAX] = {
	//
	//	White pawn.
	//
	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,
	2,	3,	4,	8,	8,	4,	3,	2,	0,	0,	0,	0,	0,	0,	0,	0,
	4,	6,	12,	15,	15,	4,	6,	4,	0,	0,	0,	0,	0,	0,	0,	0,
	4,	7,	18,	25,	25,	16,	7,	4,	0,	0,	0,	0,	0,	0,	0,	0,
	6,	11,	18,	27,	27,	16,	11,	6,	0,	0,	0,	0,	0,	0,	0,	0,
	10,	15,	24,	32,	32,	24,	15,	10,	0,	0,	0,	0,	0,	0,	0,	0,
	10,	15,	24,	32,	32,	24,	15,	10,	0,	0,	0,	0,	0,	0,	0,	0,
	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,
	//
	//	Black pawn.
	//
	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,
	10,	15,	24,	32,	32,	24,	15,	10,	0,	0,	0,	0,	0,	0,	0,	0,
	10,	15,	24,	32,	32,	24,	15,	10,	0,	0,	0,	0,	0,	0,	0,	0,
	6,	11,	18,	27,	27,	16,	11,	6,	0,	0,	0,	0,	0,	0,	0,	0,
	4,	7,	18,	25,	25,	16,	7,	4,	0,	0,	0,	0,	0,	0,	0,	0,
	4,	6,	12,	15,	15,	4,	6,	4,	0,	0,	0,	0,	0,	0,	0,	0,
	2,	3,	4,	8,	8,	4,	3,	2,	0,	0,	0,	0,	0,	0,	0,	0,
	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,
	//
	//	White knight.
	//
	-7,	-3,	1,	3,	3,	1,	-3,	-7,	0,	0,	0,	0,	0,	0,	0,	0,
	2,	6,	14,	20,	20,	14,	6,	2,	0,	0,	0,	0,	0,	0,	0,	0,
	6,	14,	22,	26,	26,	22,	14,	6,	0,	0,	0,	0,	0,	0,	0,	0,
	8,	18,	26,	30,	30,	26,	18,	8,	0,	0,	0,	0,	0,	0,	0,	0,
	8,	18,	30,	32,	32,	30,	18,	8,	0,	0,	0,	0,	0,	0,	0,	0,
	6,	14,	28,	32,	32,	28,	14,	6,	0,	0,	0,	0,	0,	0,	0,	0,
	2,	6,	14,	20,	20,	14,	6,	2,	0,	0,	0,	0,	0,	0,	0,	0,
	-7,	-3,	1,	3,	3,	1,	-3,	-7,	0,	0,	0,	0,	0,	0,	0,	0,
	//
	//	Black knight.
	//
	-7,	-3,	1,	3,	3,	1,	-3,	-7,	0,	0,	0,	0,	0,	0,	0,	0,
	2,	6,	14,	20,	20,	14,	6,	2,	0,	0,	0,	0,	0,	0,	0,	0,
	6,	14,	28,	32,	32,	28,	14,	6,	0,	0,	0,	0,	0,	0,	0,	0,
	8,	18,	30,	32,	32,	30,	18,	8,	0,	0,	0,	0,	0,	0,	0,	0,
	8,	18,	26,	30,	30,	26,	18,	8,	0,	0,	0,	0,	0,	0,	0,	0,
	6,	14,	22,	26,	26,	22,	14,	6,	0,	0,	0,	0,	0,	0,	0,	0,
	2,	6,	14,	20,	20,	14,	6,	2,	0,	0,	0,	0,	0,	0,	0,	0,
	-7,	-3,	1,	3,	3,	1,	-3,	-7,	0,	0,	0,	0,	0,	0,	0,	0,
	//
	//	White bishop.
	//
	16,	16,	16,	16,	16,	16,	16,	16,	0,	0,	0,	0,	0,	0,	0,	0,
	26,	29,	31,	31,	31,	31,	29,	26,	0,	0,	0,	0,	0,	0,	0,	0,
	26,	28,	32,	32,	32,	32,	28,	26,	0,	0,	0,	0,	0,	0,	0,	0,
	16,	26,	32,	32,	32,	32,	26,	16,	0,	0,	0,	0,	0,	0,	0,	0,
	16,	26,	32,	32,	32,	32,	26,	16,	0,	0,	0,	0,	0,	0,	0,	0,
	16,	28,	32,	32,	32,	32,	28,	16,	0,	0,	0,	0,	0,	0,	0,	0,
	16,	29,	31,	31,	31,	31,	29,	16,	0,	0,	0,	0,	0,	0,	0,	0,
	16,	16,	16,	16,	16,	16,	16,	16,	0,	0,	0,	0,	0,	0,	0,	0,
	//
	//	Black bishop.
	//
	16,	16,	16,	16,	16,	16,	16,	16,	0,	0,	0,	0,	0,	0,	0,	0,
	16,	29,	31,	31,	31,	31,	29,	16,	0,	0,	0,	0,	0,	0,	0,	0,
	16,	28,	32,	32,	32,	32,	28,	16,	0,	0,	0,	0,	0,	0,	0,	0,
	16,	26,	32,	32,	32,	32,	26,	16,	0,	0,	0,	0,	0,	0,	0,	0,
	16,	26,	32,	32,	32,	32,	26,	16,	0,	0,	0,	0,	0,	0,	0,	0,
	26,	28,	32,	32,	32,	32,	28,	26,	0,	0,	0,	0,	0,	0,	0,	0,
	26,	29,	31,	31,	31,	31,	29,	26,	0,	0,	0,	0,	0,	0,	0,	0,
	16,	16,	16,	16,	16,	16,	16,	16,	0,	0,	0,	0,	0,	0,	0,	0,
	//
	//	White rook.
	//
	0,	0,	0,	3,	3,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,
	-2,	0,	0,	0,	0,	0,	0,	-2,	0,	0,	0,	0,	0,	0,	0,	0,
	-2,	0,	0,	0,	0,	0,	0,	-2,	0,	0,	0,	0,	0,	0,	0,	0,
	-2,	0,	0,	0,	0,	0,	0,	-2,	0,	0,	0,	0,	0,	0,	0,	0,
	-2,	0,	0,	0,	0,	0,	0,	-2,	0,	0,	0,	0,	0,	0,	0,	0,
	-2,	0,	0,	0,	0,	0,	0,	-2,	0,	0,	0,	0,	0,	0,	0,	0,
	10,	10,	10,	10,	10,	10,	10,	10,	0,	0,	0,	0,	0,	0,	0,	0,
	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,
	//
	//	Black rook.
	//
	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,
	10,	10,	10,	10,	10,	10,	10,	10,	0,	0,	0,	0,	0,	0,	0,	0,
	-2,	0,	0,	0,	0,	0,	0,	-2,	0,	0,	0,	0,	0,	0,	0,	0,
	-2,	0,	0,	0,	0,	0,	0,	-2,	0,	0,	0,	0,	0,	0,	0,	0,
	-2,	0,	0,	0,	0,	0,	0,	-2,	0,	0,	0,	0,	0,	0,	0,	0,
	-2,	0,	0,	0,	0,	0,	0,	-2,	0,	0,	0,	0,	0,	0,	0,	0,
	-2,	0,	0,	0,	0,	0,	0,	-2,	0,	0,	0,	0,	0,	0,	0,	0,
	0,	0,	0,	3,	3,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,
	//
	//	White queen.
	//
	-2,	-2,	-2,	0,	0,	-2,	-2,	-2,	0,	0,	0,	0,	0,	0,	0,	0,
	0,	0,	1,	1,	1,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,
	0,	1,	1,	1,	1,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,
	0,	0,	0,	2,	2,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,
	0,	0,	0,	2,	2,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,
	-2,	-2,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,
	-2,	-2,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,
	-2,	-2,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,
	//
	//	Black queen.
	//
	-2,	-2,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,
	-2,	-2,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,
	-2,	-2,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,
	0,	0,	0,	2,	2,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,
	0,	0,	0,	2,	2,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,
	0,	1,	1,	1,	1,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,
	0,	0,	1,	1,	1,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,
	-2,	-2,	-2,	0,	0,	-2,	-2,	-2,	0,	0,	0,	0,	0,	0,	0,	0,
	//
	//	White king.
	//
	1,	3,	5,	-8,	-5,	-8,	5,	2,	0,	0,	0,	0,	0,	0,	0,	0,
	-5,	-5,	-5,	-5,	-5,	-5,	-5,	-5,	0,	0,	0,	0,	0,	0,	0,	0,
	-7,	-7,	-7,	-9,	-9,	-7,	-7,	-7,	0,	0,	0,	0,	0,	0,	0,	0,
	-20,-20,-20,-20,-20,-20,-20,-20,0,	0,	0,	0,	0,	0,	0,	0,
	-20,-20,-20,-20,-20,-20,-20,-20,0,	0,	0,	0,	0,	0,	0,	0,
	-20,-20,-20,-20,-20,-20,-20,-20,0,	0,	0,	0,	0,	0,	0,	0,
	-20,-20,-20,-20,-20,-20,-20,-20,0,	0,	0,	0,	0,	0,	0,	0,
	-20,-20,-20,-20,-20,-20,-20,-20,0,	0,	0,	0,	0,	0,	0,	0,
	//
	//	Black king.
	//
	-20,-20,-20,-20,-20,-20,-20,-20,0,	0,	0,	0,	0,	0,	0,	0,
	-20,-20,-20,-20,-20,-20,-20,-20,0,	0,	0,	0,	0,	0,	0,	0,
	-20,-20,-20,-20,-20,-20,-20,-20,0,	0,	0,	0,	0,	0,	0,	0,
	-20,-20,-20,-20,-20,-20,-20,-20,0,	0,	0,	0,	0,	0,	0,	0,
	-20,-20,-20,-20,-20,-20,-20,-20,0,	0,	0,	0,	0,	0,	0,	0,
	-7,	-7,	-7,	-9,	-9,	-7,	-7,	-7,	0,	0,	0,	0,	0,	0,	0,	0,
	-5,	-5,	-5,	-5,	-5,	-5,	-5,	-5,	0,	0,	0,	0,	0,	0,	0,	0,
	1,	3,	5,	-8,	-5,	-8,	5,	2,	0,	0,	0,	0,	0,	0,	0,	0,
};

int	const c_argvalEKing[coMAX][csqMAX] = {
	//
	//	White king.
	//
	0,	0,	1,	2,	2,	1,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,
	0,	2,	4,	5,	5,	4,	2,	0,	0,	0,	0,	0,	0,	0,	0,	0,
	1,	4,	6,	7,	7,	6,	4,	1,	0,	0,	0,	0,	0,	0,	0,	0,
	1,	4,	10,	10,	10,	10,	4,	1,	0,	0,	0,	0,	0,	0,	0,	0,
	1,	4,	12,	15,	15,	12,	4,	1,	0,	0,	0,	0,	0,	0,	0,	0,
	0,	7,	10,	12,	12,	10,	7,	0,	0,	0,	0,	0,	0,	0,	0,	0,
	0,	2,	4,	5,	5,	4,	2,	0,	0,	0,	0,	0,	0,	0,	0,	0,
	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,
	//
	//	Black king.
	//
	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,
	0,	2,	4,	5,	5,	4,	2,	0,	0,	0,	0,	0,	0,	0,	0,	0,
	0,	7,	10,	12,	12,	10,	7,	0,	0,	0,	0,	0,	0,	0,	0,	0,
	1,	4,	12,	15,	15,	12,	4,	1,	0,	0,	0,	0,	0,	0,	0,	0,
	1,	4,	10,	10,	10,	10,	4,	1,	0,	0,	0,	0,	0,	0,	0,	0,
	1,	4,	6,	7,	7,	6,	4,	1,	0,	0,	0,	0,	0,	0,	0,	0,
	0,	2,	4,	5,	5,	4,	2,	0,	0,	0,	0,	0,	0,	0,	0,	0,
	0,	0,	1,	2,	2,	1,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,
};

//	-	-	-	-	-	-	-	-	-	-	-	-	-	-	-	-	-	-	-

//	This simple eval function just sums piece-square and material values.

int ValEval(PCON pcon, PSTE pste)
{
	int	argval[coMAX];
	int	co;

	for (co = coWHITE; co <= coBLACK; co++) {
		int	i;

		argval[co] = 0;
		for (i = 0; i < pcon->argcpi[co]; i++) {
			PPI	ppi = &pcon->argpi[co][i];

			if (!ppi->fDead) {
				argval[co] += ppi->val;
				if ((ppi->pc == pcKING) &&
					(pste->valPcThem <= 2 * valROOK + valMINOR))
					argval[co] += c_argvalEKing[ppi->co][ppi->isq];
				else
					argval[co] += c_argvalPos[ppi->pc][ppi->co][ppi->isq];
			}
		}
	}
	if (pste->coUs == coWHITE)
		return argval[coWHITE] - argval[coBLACK];
	return argval[coBLACK] - argval[coWHITE];
}

//	-	-	-	-	-	-	-	-	-	-	-	-	-	-	-	-	-	-	-
